<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Ubuntu设置NFS共享文件服务器</title>
      <link href="/2018/10/26/%E8%AE%BE%E7%BD%AENFS%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018/10/26/%E8%AE%BE%E7%BD%AENFS%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>NFS Network File System 网络文件系统</p><h3 id="安装NFS服务"><a href="#安装NFS服务" class="headerlink" title="安装NFS服务"></a>安装NFS服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//安装服务</span><br><span class="line">sudo apt-get install nfs-kernel-server </span><br><span class="line"></span><br><span class="line">//配置文件</span><br><span class="line">sudo vim /etc/exports </span><br><span class="line"></span><br><span class="line">exports文件内容添加</span><br><span class="line">/home/alwynxu/file *(rw,sync,no_root_squash,no_subtree_check)</span><br><span class="line"></span><br><span class="line">//重启服务</span><br><span class="line">service nfs-kernel-server restart</span><br></pre></td></tr></table></figure><h3 id="查看服务器共享的目录"><a href="#查看服务器共享的目录" class="headerlink" title="查看服务器共享的目录"></a>查看服务器共享的目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alwynxu@alwynxu:~$ showmount -e localhost</span><br><span class="line">Export list for localhost:</span><br><span class="line">/home/alwynxu/file *</span><br></pre></td></tr></table></figure><p>其中<strong>/home/alwynxu/file</strong>当前nfs服务器要共享的文件夹路径，* 代表所有客户端均可访问  (rw,sync,no_root_squash,no_subtree_check)一些权限设置</p><p>在客户端执行命令，将nfs共享服务器文件夹挂载到当前客户端的/Users/alwynxu/mountfile路径下， 注意添加<code>-o resvport</code> 选项,否则会出现无法访问的错错误<br><code>alwynxudeMacBook-Pro:mountfile alwynxu$ sudo mount -t nfs -o rw -o tcp -o resvport 10.194.35.100:/home/alwynxu/file /Users/alwynxu/mountfile</code></p><h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a><strong>错误</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alwynxudeMacBook-Pro:mountfile alwynxu$ sudo mount -t nfs -o rw -o tcp 10.194.35.100:/home/alwynxu/file /Users/alwynxu/mountfile</span><br><span class="line">mount_nfs: can&apos;t mount /home/alwynxu/file from 10.194.35.100 onto /Users/alwynxu/mountfile: Operation not permitted</span><br></pre></td></tr></table></figure><p>java中接受的上传文件可以通过<code>MultipartFile</code>来接收并通过<code>transferTo</code>将文件上传到NFS服务器<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(MultipartFile file)</span></span>&#123;</span><br><span class="line">    <span class="comment">//注意此文件夹路径是挂载点的路径，也即当前应用所在的服务器中的路径，而非NFS服务器上的路径地址。</span></span><br><span class="line">    String serverPath = <span class="string">"/home/alwynxu/file"</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        file.transterTo(<span class="keyword">new</span> File(serverPath+ <span class="string">"/girl.png"</span>));</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nfs </tag>
            
            <tag> NFS </tag>
            
            <tag> 共享服务 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sftp and ftp in java</title>
      <link href="/2018/10/26/sftp-and-ftp-in-java/"/>
      <url>/2018/10/26/sftp-and-ftp-in-java/</url>
      
        <content type="html"><![CDATA[<p>FTP是一种文件传输协议，一般是为了方便数据共享的。包括一个FTP服务器和多个FTP客户端。FTP客户端通过FTP协议在服务器上下载资源。而SFTP协议是在FTP的基础上对数据进行加密，使得传输的数据相对来说更安全。但是这种安全是以牺牲效率为代价的，也就是说SFTP的传输效率比FTP要低(不过现实使用当中，没有发现多大差别)。个人肤浅的认为就是：一；FTP要安装，SFTP不要安装。二；SFTP更安全，但更安全带来副作用就是的效率比FTP要低些。</p><blockquote><p>参考博文：<a href="http://www.cnblogs.com/xuliangxing/p/7120130.html" target="_blank" rel="noopener">http://www.cnblogs.com/xuliangxing/p/7120130.html</a></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ftp--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-net<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-net<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--sftp--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.jcraft<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsch<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1.54<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="SFTP"><a href="#SFTP" class="headerlink" title="SFTP"></a>SFTP</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ftpclient.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lxu003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/10/26 10:26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> com.jcraft.jsch.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 类说明 sftp工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SFTPUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Logger log = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ChannelSftp sftp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Session session;</span><br><span class="line">    <span class="comment">/** SFTP 登录用户名*/</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">/** SFTP 登录密码*/</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">/** 私钥 */</span></span><br><span class="line">    <span class="keyword">private</span> String privateKey;</span><br><span class="line">    <span class="comment">/** SFTP 服务器地址IP地址*/</span></span><br><span class="line">    <span class="keyword">private</span> String host;</span><br><span class="line">    <span class="comment">/** SFTP 端口*/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造基于密码认证的sftp对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SFTPUtil</span><span class="params">(String username, String password, String host, <span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">        <span class="keyword">this</span>.host = host;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造基于秘钥认证的sftp对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SFTPUtil</span><span class="params">(String username, String host, <span class="keyword">int</span> port, String privateKey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.host = host;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">        <span class="keyword">this</span>.privateKey = privateKey;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SFTPUtil</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接sftp服务器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JSch jsch = <span class="keyword">new</span> JSch();</span><br><span class="line">            <span class="keyword">if</span> (privateKey != <span class="keyword">null</span>) &#123;</span><br><span class="line">                jsch.addIdentity(privateKey);<span class="comment">// 设置私钥</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            session = jsch.getSession(username, host, port);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (password != <span class="keyword">null</span>) &#123;</span><br><span class="line">                session.setPassword(password);</span><br><span class="line">            &#125;</span><br><span class="line">            Properties config = <span class="keyword">new</span> Properties();</span><br><span class="line">            config.put(<span class="string">"StrictHostKeyChecking"</span>, <span class="string">"no"</span>);</span><br><span class="line"></span><br><span class="line">            session.setConfig(config);</span><br><span class="line">            session.connect();</span><br><span class="line"></span><br><span class="line">            Channel channel = session.openChannel(<span class="string">"sftp"</span>);</span><br><span class="line">            channel.connect();</span><br><span class="line"></span><br><span class="line">            sftp = (ChannelSftp) channel;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JSchException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭连接 server</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sftp != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sftp.isConnected()) &#123;</span><br><span class="line">                sftp.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (session != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (session.isConnected()) &#123;</span><br><span class="line">                session.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将输入流的数据上传到sftp作为文件。文件完整路径=basePath+directory</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> basePath  服务器的基础路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> directory  上传到该目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sftpFileName  sftp端文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in   输入流</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload</span><span class="params">(String basePath,String directory, String sftpFileName, InputStream input)</span> <span class="keyword">throws</span> SftpException</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sftp.cd(basePath);</span><br><span class="line">            sftp.cd(directory);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SftpException e) &#123;</span><br><span class="line">            <span class="comment">//目录不存在，则创建文件夹</span></span><br><span class="line">            String [] dirs=directory.split(<span class="string">"/"</span>);</span><br><span class="line">            String tempPath=basePath;</span><br><span class="line">            <span class="keyword">for</span>(String dir:dirs)&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">null</span>== dir || <span class="string">""</span>.equals(dir)) <span class="keyword">continue</span>;</span><br><span class="line">                tempPath+=<span class="string">"/"</span>+dir;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    sftp.cd(tempPath);</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SftpException ex)&#123;</span><br><span class="line">                    sftp.mkdir(tempPath);</span><br><span class="line">                    sftp.cd(tempPath);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sftp.put(input, sftpFileName);  <span class="comment">//上传文件</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下载文件。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> directory 下载目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> downloadFile 下载的文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> saveFile 存在本地的路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">(String directory, String downloadFile, String saveFile)</span> <span class="keyword">throws</span> SftpException, FileNotFoundException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (directory != <span class="keyword">null</span> &amp;&amp; !<span class="string">""</span>.equals(directory)) &#123;</span><br><span class="line">            sftp.cd(directory);</span><br><span class="line">        &#125;</span><br><span class="line">        File file = <span class="keyword">new</span> File(saveFile);</span><br><span class="line">        sftp.get(downloadFile, <span class="keyword">new</span> FileOutputStream(file));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下载文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> directory 下载目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> downloadFile 下载的文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 字节数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] download(String directory, String downloadFile) <span class="keyword">throws</span> SftpException, IOException&#123;</span><br><span class="line">        <span class="keyword">if</span> (directory != <span class="keyword">null</span> &amp;&amp; !<span class="string">""</span>.equals(directory)) &#123;</span><br><span class="line">            sftp.cd(directory);</span><br><span class="line">        &#125;</span><br><span class="line">        InputStream is = sftp.get(downloadFile);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] fileData = IOUtils.toByteArray(is);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> fileData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> directory 要删除文件所在目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deleteFile 要删除的文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String directory, String deleteFile)</span> <span class="keyword">throws</span> SftpException</span>&#123;</span><br><span class="line">        sftp.cd(directory);</span><br><span class="line">        sftp.rm(deleteFile);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 列出目录下的文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> directory 要列出的目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> directory</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Vector&lt;?&gt; listFiles(String directory) <span class="keyword">throws</span> SftpException &#123;</span><br><span class="line">        <span class="keyword">return</span> sftp.ls(directory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//上传文件测试</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SftpException, IOException </span>&#123;</span><br><span class="line">        SFTPUtil sftp = <span class="keyword">new</span> SFTPUtil(<span class="string">"用户名"</span>, <span class="string">"密码"</span>, <span class="string">"ip地址"</span>, <span class="number">22</span>);</span><br><span class="line">        sftp.login();</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"D:\\图片\\t0124dd095ceb042322.jpg"</span>);</span><br><span class="line">        InputStream is = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line"></span><br><span class="line">        sftp.upload(<span class="string">"基础路径"</span>,<span class="string">"文件路径"</span>, <span class="string">"test_sftp.jpg"</span>, is);</span><br><span class="line">        sftp.logout();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ftpclient.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lxu003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/10/26 09:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.net.ftp.FTP;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.net.ftp.FTPClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.net.ftp.FTPFile;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.net.ftp.FTPReply;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ftp上传下载工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FtpUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description: 向FTP服务器上传文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> host FTP服务器hostname</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> port FTP服务器端口</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username FTP登录账号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password FTP登录密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> basePath FTP服务器基础目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filePath FTP服务器文件存放路径。文件的路径为basePath+filePath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filename 上传到FTP服务器上的文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> input 输入流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 成功返回true，否则返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">uploadFile</span><span class="params">(String host, <span class="keyword">int</span> port, String username, String password, String basePath,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     String filePath, String filename, InputStream input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line">        FTPClient ftp = <span class="keyword">new</span> FTPClient();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> reply;</span><br><span class="line">            ftp.connect(host, port);<span class="comment">// 连接FTP服务器</span></span><br><span class="line">            <span class="comment">// 如果采用默认端口，可以使用ftp.connect(host)的方式直接连接FTP服务器</span></span><br><span class="line">            ftp.login(username, password);<span class="comment">// 登录</span></span><br><span class="line">            reply = ftp.getReplyCode();</span><br><span class="line">            <span class="keyword">if</span> (!FTPReply.isPositiveCompletion(reply)) &#123;</span><br><span class="line">                ftp.disconnect();</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//切换到上传目录</span></span><br><span class="line">            <span class="keyword">if</span> (!ftp.changeWorkingDirectory(basePath+filePath)) &#123;</span><br><span class="line">                <span class="comment">//如果目录不存在创建目录</span></span><br><span class="line">                String[] dirs = filePath.split(<span class="string">"/"</span>);</span><br><span class="line">                String tempPath = basePath;</span><br><span class="line">                <span class="keyword">for</span> (String dir : dirs) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">null</span> == dir || <span class="string">""</span>.equals(dir)) <span class="keyword">continue</span>;</span><br><span class="line">                    tempPath += <span class="string">"/"</span> + dir;</span><br><span class="line">                    <span class="keyword">if</span> (!ftp.changeWorkingDirectory(tempPath)) &#123;  <span class="comment">//进不去目录，说明该目录不存在</span></span><br><span class="line">                        <span class="keyword">if</span> (!ftp.makeDirectory(tempPath)) &#123; <span class="comment">//创建目录</span></span><br><span class="line">                            <span class="comment">//如果创建文件目录失败，则返回</span></span><br><span class="line">                            System.out.println(<span class="string">"创建文件目录"</span>+tempPath+<span class="string">"失败"</span>);</span><br><span class="line">                            <span class="keyword">return</span> result;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">//目录存在，则直接进入该目录</span></span><br><span class="line">                            ftp.changeWorkingDirectory(tempPath);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//设置上传文件的类型为二进制类型</span></span><br><span class="line">            ftp.setFileType(FTP.BINARY_FILE_TYPE);</span><br><span class="line">            <span class="comment">//上传文件</span></span><br><span class="line">            <span class="keyword">if</span> (!ftp.storeFile(filename, input)) &#123;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">            input.close();</span><br><span class="line">            ftp.logout();</span><br><span class="line">            result = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (ftp.isConnected()) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ftp.disconnect();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException ioe) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description: 从FTP服务器下载文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> host FTP服务器hostname</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> port FTP服务器端口</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username FTP登录账号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password FTP登录密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> remotePath FTP服务器上的相对路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName 要下载的文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> localPath 下载后保存到本地的路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">downloadFile</span><span class="params">(String host, <span class="keyword">int</span> port, String username, String password, String remotePath,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       String fileName, String localPath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line">        FTPClient ftp = <span class="keyword">new</span> FTPClient();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> reply;</span><br><span class="line">            ftp.connect(host, port);</span><br><span class="line">            <span class="comment">// 如果采用默认端口，可以使用ftp.connect(host)的方式直接连接FTP服务器</span></span><br><span class="line">            ftp.login(username, password);<span class="comment">// 登录</span></span><br><span class="line">            reply = ftp.getReplyCode();</span><br><span class="line">            <span class="keyword">if</span> (!FTPReply.isPositiveCompletion(reply)) &#123;</span><br><span class="line">                ftp.disconnect();</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">            ftp.changeWorkingDirectory(remotePath);<span class="comment">// 转移到FTP服务器目录</span></span><br><span class="line">            FTPFile[] fs = ftp.listFiles();</span><br><span class="line">            <span class="keyword">for</span> (FTPFile ff : fs) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ff.getName().equals(fileName)) &#123;</span><br><span class="line">                    File localFile = <span class="keyword">new</span> File(localPath + <span class="string">"/"</span> + ff.getName());</span><br><span class="line"></span><br><span class="line">                    OutputStream is = <span class="keyword">new</span> FileOutputStream(localFile);</span><br><span class="line">                    ftp.retrieveFile(ff.getName(), is);</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ftp.logout();</span><br><span class="line">            result = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (ftp.isConnected()) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ftp.disconnect();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException ioe) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>hexo gitment登录问题解决</title>
      <link href="/2018/10/26/hexo-gitment%E7%99%BB%E5%BD%95%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2018/10/26/hexo-gitment%E7%99%BB%E5%BD%95%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>通过自己的服务器搭建gitment评论系统<br><a id="more"></a></p></blockquote><p>路径:<code>hemes/next/layout/third-party/comments/gitment.swig</code></p><p>修改文件替换js文件路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if not (theme.duoshuo and theme.duoshuo.shortname) and not theme.duoshuo_shortname %&#125;</span><br><span class="line">&#123;% if theme.gitment.enable and theme.gitment.client_id %&#125;</span><br><span class="line">&lt;!-- LOCAL: You can save these files to your site and update links --&gt;</span><br><span class="line">    &#123;% if theme.gitment.mint %&#125;</span><br><span class="line">        &#123;% set CommentsClass = &quot;Gitmint&quot; %&#125;</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://aimingoo.github.io/gitmint/style/default.css&quot;&gt;</span><br><span class="line">        &lt;!-- 更换此处的js路径为github上的路径 ， 同时修改该js文件中的认证登录地址为自己的服务--&gt;</span><br><span class="line">        &lt;script src=&quot;https://gitmenta.github.io/gitmenta/gitmint.browser.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        &#123;% set CommentsClass = &quot;Gitment&quot; %&#125;</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://imsun.github.io/gitment/style/default.css&quot;&gt;</span><br><span class="line">        &lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;!-- END LOCAL --&gt;</span><br><span class="line">``</span><br><span class="line">修改文件中： </span><br><span class="line">查找 https://gh-oauth.imsun.net  并替换为自己的服务器地址</span><br><span class="line">https://gitmenta.github.io/gitmenta/gitmint.browser.js&quot;</span><br></pre></td></tr></table></figure></p><p>this.state.user.isLoggingIn = true;<br>      var logging = !proxy_gateway ? _utils.http.post(‘<a href="https://gh-oauth.imsun.net" target="_blank" rel="noopener">https://gh-oauth.imsun.net</a> ‘, { code: code, client_id: client_id, client_secret: client_secret }, ‘’) : _utils.http.post(‘/login/oauth/access_token’, ‘code=’ + code + ‘&amp;client_id=’ + client_id, proxy_gateway);<br>      logging.then(function (data) {<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 搭建服务器</span><br></pre></td></tr></table></figure></p><p>git clone <a href="https://github.com/imsun/gh-oauth-server.git" target="_blank" rel="noopener">https://github.com/imsun/gh-oauth-server.git</a><br>npm install &amp;&amp; npm start<br><code>`</code><br>默认会在3000端口启动服务</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> gitment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gitment </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Springboot获取服务端口</title>
      <link href="/2018/10/23/Springboot%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3/"/>
      <url>/2018/10/23/Springboot%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p>Springboot项目再启动的过程中依次发布的事件为：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">context</span>.<span class="title">event</span>.<span class="title">ContextRefreshedEvent</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">boot</span>.<span class="title">web</span>.<span class="title">servlet</span>.<span class="title">context</span>.**<span class="title">ServletWebServerInitializedEvent</span>**</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">boot</span>.<span class="title">context</span>.<span class="title">event</span>.<span class="title">ApplicationStartedEvent</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">boot</span>.<span class="title">context</span>.<span class="title">event</span>.<span class="title">ApplicationReadyEvent</span></span></span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ServletWebServerInitializedEvent</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ServletWebServerInitializedEvent servletWebServerInitializedEvent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> port = servletWebServerInitializedEvent.getWebServer().getPort();</span><br><span class="line">        System.out.println(port);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> Springboot </tag>
            
            <tag> 端口 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JAVA call Shell Script</title>
      <link href="/2018/10/23/JAVA-call-Shell-Script/"/>
      <url>/2018/10/23/JAVA-call-Shell-Script/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testShell</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Runtime runtime = Runtime.getRuntime();</span><br><span class="line">            Process process = runtime.exec(<span class="string">"/Users/alwynxu/Desktop/jmx-demo/test.sh"</span>);</span><br><span class="line"><span class="comment">//            Process process = runtime.exec("java");</span></span><br><span class="line">            process.waitFor();</span><br><span class="line">            InputStream inputStream = process.getInputStream();</span><br><span class="line">            InputStream errorStream = process.getErrorStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span>[] errBytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">byte</span>[] inputBytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2014</span>];</span><br><span class="line">            <span class="keyword">int</span> errCount = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> inputCount = <span class="number">0</span>;</span><br><span class="line">            System.out.println(<span class="string">"执行错误命令：--------"</span>);</span><br><span class="line">            <span class="keyword">while</span> ((errCount = errorStream.read(errBytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String(errBytes,<span class="number">0</span>, errCount);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"执行结果：----------"</span>);</span><br><span class="line">            <span class="keyword">while</span> ((inputCount = inputStream.read(inputBytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String(inputBytes, <span class="number">0</span>, inputCount);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">soar=/Users/alwynxu/go/src/github.com/XiaoMi/soar</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;soar&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'select * from tb1'</span> | <span class="variable">$&#123;soar&#125;</span>/soar &gt; report.md</span><br><span class="line">cat report.md | <span class="variable">$&#123;soar&#125;</span>/soar -report-type md2html &gt; report.html</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Redis连接池</title>
      <link href="/2018/10/21/distributed-architecture/Redis/Redis%E8%BF%9E%E6%8E%A5%E6%B1%A0/"/>
      <url>/2018/10/21/distributed-architecture/Redis/Redis%E8%BF%9E%E6%8E%A5%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.alwyn.redis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisPoolUtils</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> JedisPool jedisPool = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">//被volatile修饰的变量不会被本地线程缓存，对该变量的读写都是直接操作共享内存，保证变量值的“可见性”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//不能在外部创建对象</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">RedisPoolUtils</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JedisPool <span class="title">getInstance</span><span class="params">()</span> </span>&#123;  <span class="comment">//双锁校验机制</span></span><br><span class="line"><span class="keyword">if</span> (jedisPool == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">synchronized</span> (RedisPoolUtils.class) &#123;</span><br><span class="line"><span class="keyword">if</span> (jedisPool == <span class="keyword">null</span>) &#123;</span><br><span class="line">JedisPoolConfig poolConfig = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置Jedis最大连接数</span></span><br><span class="line">poolConfig.setMaxTotal(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">///设置Jedis连接最大空闲数</span></span><br><span class="line">poolConfig.setMaxIdle(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//设置获取Jedis连接的最大等待时间（50秒）  </span></span><br><span class="line">poolConfig.setMaxWaitMillis(<span class="number">50</span> * <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置在获取Jedis连接时，自动检验连接是否可用  </span></span><br><span class="line">poolConfig.setTestOnBorrow(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置在将连接放回池中前，自动检验连接是否有效  </span></span><br><span class="line">poolConfig.setTestOnReturn(<span class="keyword">true</span>);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置自动测试池中的空闲连接是否都是可用连接  </span></span><br><span class="line">poolConfig.setTestWhileIdle(<span class="keyword">true</span>);  </span><br><span class="line"></span><br><span class="line">jedisPool = <span class="keyword">new</span> JedisPool(poolConfig,<span class="string">"39.107.226.243"</span>, <span class="number">6379</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> jedisPool;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭Jedis连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> jedisPool</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> jedis</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(JedisPool jedisPool, Jedis jedis)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">null</span> != jedis) &#123;</span><br><span class="line">jedisPool.returnResourceObject(jedis);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.alwyn.redis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisPoolDemo</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     JedisPool jedisPool = RedisPoolUtils.getInstance();</span><br><span class="line">     Jedis jedis = <span class="keyword">null</span>;</span><br><span class="line">     <span class="keyword">try</span> </span><br><span class="line">     &#123;</span><br><span class="line">       jedis = jedisPool.getResource();</span><br><span class="line">       jedis.set(<span class="string">"k18"</span>,<span class="string">"v183"</span>);</span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">       e.printStackTrace();</span><br><span class="line">     &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">     RedisPoolUtils.release(jedisPool, jedis);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis连接池 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Spring注解开发实现零配置</title>
      <link href="/2018/10/21/SpringFramework/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%AE%9E%E7%8E%B0%E9%9B%B6%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/10/21/SpringFramework/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%AE%9E%E7%8E%B0%E9%9B%B6%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Spring是一个管理Bean的容器，由于Bean与Bean之间的依赖关系而引入了DI从而实现一种IOC，即控制反转，因此Spring容器也可以被称作IOC容器（ApplicationContext）。</p></blockquote><a id="more"></a><ol><li><p>XML配置文件的方式注册组件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xis</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">""</span><span class="attr">http:</span>//<span class="attr">www.springframework.org</span>/<span class="attr">schema</span>/<span class="attr">beans</span> <span class="attr">http:</span>//<span class="attr">www.springframework.org</span>/<span class="attr">schema</span>/<span class="attr">beans</span>/<span class="attr">spring-beans-4.2.xsd</span>"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p> ClassPathXmlApplicationContext(String location)</p></li><li><p>注解方式注册组件<br> a. @Configuration 配置类注解，修饰类，告诉Spring这是一个配置类<br> b. @Bean          组件类注解，给容器中注册一个Bean，类型为返回值类型，id默认是用方法名做为id</p></li></ol><pre><code>AnnotationConfigApplicationContext(Class configClazz)</code></pre><ol start="3"><li>包扫描<br>配置类上添加注解<br>@ComponentScan(value=”com.alwyn”, excludeFilters={<br> @Filter(type=FilterType.Annotation, classes={Controller.class}),<br> @Filter(type=FilterType.ASSIGNABLE_TYPE, class=BookService.class),<br> @Filter(type=FilterType.REGEX, class=””),</li></ol><p>})</p><ul><li>value指定扫描的包</li><li>includeFilters: 必须设置useDefaultFilters为false</li><li>excludeFilters :  Filter[] includeFilters() default {};</li><li>useDefaultFilters : defualt true;</li><li>扫描的注解包括：@Controller @Service @Repository @Component</li></ul>]]></content>
      
      
      <categories>
          
          <category> SpringFramework </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 注解开发 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>有关java构造函数调用</title>
      <link href="/2018/10/21/%E6%9C%89%E5%85%B3java%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8/"/>
      <url>/2018/10/21/%E6%9C%89%E5%85%B3java%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>构造方法用来初始化类的对象，与父类的其它成员不同，它不能被子类继承（子类可以继承父类所有的成员变量和成员方法，但不继承父类的构造方法）。因此，在创建子类对象时，为了初始化从父类继承来的数据成员，系统需要调用其父类的构造方法。<br><a id="more"></a><br>如果没有显式的构造函数，编译器会给一个默认的构造函数，并且该默认的构造函数仅仅在没有显式地声明构造函数情况下创建。<br>构造原则如下：</p><ol><li>如果子类没有定义构造方法，则调用父类的无参数的构造方法。</li><li>如果子类定义了构造方法，不论是无参数还是带参数，在创建子类的对象的时候,首先执行父类无参数的构造方法，然后执行自己的构造方法。</li><li>在创建子类对象时候，如果子类的构造函数没有显示调用父类的构造函数，则会调用父类的默认无参构造函数。</li><li>在创建子类对象时候，如果子类的构造函数没有显示调用父类的构造函数且父类自己提供了无参构造函数，则会调用父类自己的无参构造函数。</li><li>在创建子类对象时候，如果子类的构造函数没有显示调用父类的构造函数且父类只定义了自己的有参构造函数，则会出错（如果父类只有有参数的构造方法，则子类必须显示调用此带参构造方法）。</li><li>如果子类调用父类带参数的构造方法，需要用初始化父类成员对象的方式</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Reactive Programming</title>
      <link href="/2018/10/20/Reactive-Programming/"/>
      <url>/2018/10/20/Reactive-Programming/</url>
      
        <content type="html"><![CDATA[<p>Define “Reactive”<br>We touched on “non-blocking” and “functional” but what does reactive mean?</p><p>The term, “reactive,” refers to programming models that are built around reacting to change — network components reacting to I/O events, UI controllers reacting to mouse events, and others. In that sense, non-blocking is reactive, because, instead of being blocked, we are now in the mode of reacting to notifications as operations complete or data becomes available.</p><p>There is also another important mechanism that we on the Spring team associate with “reactive” and that is non-blocking back pressure. In synchronous, imperative code, blocking calls serve as a natural form of back pressure that forces the caller to wait. In non-blocking code, it becomes important to control the rate of events so that a fast producer does not overwhelm its destination.</p><p>Reactive Streams is a small spec (also adopted in Java 9) that defines the interaction between asynchronous components with back pressure. For example a data repository (acting as Publisher) can produce data that an HTTP server (acting as Subscriber) can then write to the response. The main purpose of Reactive Streams is to let the subscriber to control how quickly or how slowly the publisher produces data.</p><p><a href="https://docs.spring.io/spring/docs/5.1.0.RELEASE/spring-framework-reference/web-reactive.html#webflux-why-reactive" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/5.1.0.RELEASE/spring-framework-reference/web-reactive.html#webflux-why-reactive</a></p><h3 id="What-is-Reactive-Programming"><a href="#What-is-Reactive-Programming" class="headerlink" title="What is Reactive Programming"></a>What is Reactive Programming</h3><p><a href="https://blog.redelastic.com/what-is-reactive-programming-bc9fa7f4a7fc" target="_blank" rel="noopener">https://blog.redelastic.com/what-is-reactive-programming-bc9fa7f4a7fc</a></p>]]></content>
      
      
      <categories>
          
          <category> Reactive </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Reactive </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/10/19/hello-world/"/>
      <url>/2018/10/19/hello-world/</url>
      
        <content type="html"><![CDATA[<p><img src="/2018/10/19/hello-world/doraemon.png" alt="image"></p><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.<br><a id="more"></a></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> 表格 </tag>
            
            <tag> 表单验证 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Extjs首节点选中</title>
      <link href="/2018/05/23/Extjs%E9%A6%96%E8%8A%82%E7%82%B9%E9%80%89%E4%B8%AD/"/>
      <url>/2018/05/23/Extjs%E9%A6%96%E8%8A%82%E7%82%B9%E9%80%89%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<p>Extjs通常会要求在tree加载显示后，默认选中除去根节点（root节点）意外的第一个node，思路：1.添加TreeStore监听。 2.获取要选中的node。 3.获取selMode，调用select方法<br><a id="more"></a></p><h2 id="1-添加TreeStore监听"><a href="#1-添加TreeStore监听" class="headerlink" title="1. 添加TreeStore监听"></a>1. 添加TreeStore监听</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> treeStore = Ext.create(<span class="string">'Ext.data.TreeStore'</span>,&#123;    <span class="comment">//定义treeStore</span></span><br><span class="line">model : <span class="string">'Model'</span>,   <span class="comment">//数据model</span></span><br><span class="line">root : &#123;</span><br><span class="line">id : <span class="string">''</span>,</span><br><span class="line">text : <span class="string">''</span>,</span><br><span class="line">type : <span class="string">'ROOT'</span></span><br><span class="line">&#125;,</span><br><span class="line">autoLoad : <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">treeStore.on(<span class="string">'load'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">s, operator, eOpts</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> rootNode = s.getRootNode();   <span class="comment">//获取根节点</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ExtJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ExtJs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redhat and ubuntu network setting</title>
      <link href="/2017/04/01/redhat-and-ubuntu-network-setting/"/>
      <url>/2017/04/01/redhat-and-ubuntu-network-setting/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="1-ubuntu14网络配置"><a href="#1-ubuntu14网络配置" class="headerlink" title="1. ubuntu14网络配置"></a>1. ubuntu14网络配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/network/</span><br><span class="line">vim interfaces</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># This file describes the network interfaces available on your system</span><br><span class="line"># and how to activate them. For more information, see interfaces(5).</span><br><span class="line"></span><br><span class="line"># The loopback network interface</span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line"># The primary network interface</span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br><span class="line"></span><br><span class="line"># 添加网络配置</span><br><span class="line">auto eth1</span><br><span class="line">iface eth1 inet static</span><br><span class="line">        address 192.168.56.101</span><br><span class="line">        network 192.168.0.0</span><br><span class="line">        netmask 255.255.255.0</span><br><span class="line">        gateway 192.168.0.1</span><br></pre></td></tr></table></figure><h2 id="2-redhat网络配置"><a href="#2-redhat网络配置" class="headerlink" title="2. redhat网络配置"></a>2. redhat网络配置</h2><p>配置文件位于: <code>/etc/sysconfig/network-scripts/</code><br>编辑文件 ： <code>vim ifcfg-eth0</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">HWADDR=08:00:27:84:ba:8b</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">UUID=ef3bdd7e-fc7f-43cd-b057-536128da39fe</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">IPADDR=192.168.56.102</span><br><span class="line">GETWAY=192.168.0.1</span><br><span class="line">PREFIX=24</span><br><span class="line">DNS=192.168.1.1 </span><br><span class="line">NETMASK=255.255.255.0</span><br></pre></td></tr></table></figure></p><p>重启服务：<code>servie network restart</code></p>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu网络设置 </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
